<div class="app-container">

  <!-- ðŸ”´ BARRA SUPERIOR SOLO CON SALIR -->
  <div class="top-bar">
    <button class="btn-logout" (click)="logout()">Salir</button>
  </div>

  <!-- ðŸŸ£ COLUMNA IZQUIERDA -->
  <aside class="left-panel">
    <h3>Especies</h3>

    <button 
      *ngIf="userRole === 'administrador'"
      class="btn-crear"
      (click)="crearEspecie()">
      Crear especie
    </button>

    <div class="lista-especies">
      <div *ngFor="let especie of especiesFiltradas" class="item-especie">
        <span>{{ especie.nombreComun }}</span>
        <button class="btn-ver" (click)="seleccionar(especie)">Ver</button>
      </div>
    </div>

    <hr>

    <h3>Datos</h3>

    <div class="dato"><strong>ID:</strong> {{ especieSeleccionada?.id || 'â€”' }}</div>
    <div class="dato"><strong>Nombre:</strong> {{ especieSeleccionada?.nombreComun || 'â€”' }}</div>
    <div class="dato"><strong>CientÃ­fico:</strong> {{ especieSeleccionada?.nombreCientifico || 'â€”' }}</div>

    <div class="dato"><strong>Observaciones:</strong></div>
    <textarea [(ngModel)]="observacion" class="obs-box"></textarea>

    <button class="btn-nav" [disabled]="!especieSeleccionada" (click)="irADetalle()">Ver Detalles</button>
    <button class="btn-nav" [disabled]="!especieSeleccionada" (click)="irAImagenes()">Ver ImÃ¡genes</button>
    <button class="btn-nav" (click)="irAObservaciones()">Ver Observaciones</button>
    <button class="btn-nav" (click)="irAMapa()">Ver Mapa</button>
  </aside>

  <!-- ðŸŸ¦ PANEL CENTRAL -->
  <section class="center-panel">

    <!-- ðŸ”µ NUEVA BARRA DE BÃšSQUEDA AQUI -->
    <div class="search-box">
      <input 
        type="text"
        [(ngModel)]="busqueda"
        (input)="filtrar()"
        placeholder="Buscar especie...">
    </div>

    <!-- Imagen + flechas -->
    <div class="img-container">
      <button class="arrow left" (click)="anterior()">&lt;</button>
      <img [src]="getImagenActual()" alt="mariposa">
      <button class="arrow right" (click)="siguiente()">&gt;</button>
    </div>

    <button class="btn-identificar" (click)="identificar()">
      Identificar
    </button>

  </section>

  <!-- ðŸŸ© COLUMNA DERECHA -->
  <aside class="right-panel">
    <div class="lista">
      <app-detalle-especie
        *ngIf="especieSeleccionada"
        [especie]="especieSeleccionada">
      </app-detalle-especie>
    </div>
  </aside>

</div>
